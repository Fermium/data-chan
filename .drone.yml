pipeline:
  build:
    image: ubuntu:xenial
    devices:
      - "/dev/bus/usb:/dev/bus/usb"
    privileged: true
    commands:
      - export DEBIAN_FRONTEND=noninteractive
      - apt update
      - apt install -y gcc gcc-avr avr-libc avrdude make git usbutils clang  libusb-1.0-0-dev doxygen
      - lsusb
      - make release -j2
      - make install
      - lsusb
      - (cd Host/examples/Tester && ./Tester -s )

  slack:
    image: plugins/slack
    webhook: https://hooks.slack.com/services/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
    channel: project-hall-flux
    when:
     status: [ failure ]
     
     
labels:
  USB: true

